{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"scopeName": "source.syntax.json.tmLanguage",
	"name": "TextMate Language JSON",
	"fileTypes": [
		".tmLanguage.json"
	],
	"patterns": [
		{ "include": "#json" },
		{ "include": "#invalid" }
	],
	"repository": {
		"json": {
			"comment": "{ ... }",
			"begin": "^\\s*{",
			"end": "}\\s*$",
			"patterns": [
				{
					"begin": "(?<={)|,",
					"end": "(?<=[]}\"]|true|false|null|-?\\d+)",
					"patterns": [
						{ "include": "#$schema"				},
						{ "include": "#scopeName"			},
						{ "include": "#name"				},
						{ "include": "#uuid"				},
						{ "include": "#fileTypes"			},
						{ "include": "#injectionSelector"	},
						{ "include": "#firstLineMatch"		},
						{ "include": "#foldingMarker"		},
						{ "include": "#patterns"			},
						{ "include": "#repository"			},
						{ "include": "#comment"				},
						{ "include": "#json-item"			},
						{ "include": "#invalid"				}
					]
				},
				{ "include": "#invalid"	}
			]
		},
		"$schema": {
			"comment": "\"$schem\": \"...\"",
			"begin": "\"(\\$)(schema)\"",
			"end": "(?!\\G)(?<=\")",
			"beginCaptures": {
				"1": { "name": "keyword.tmlanguage" },
				"2": { "name": "support.function.tmlanguage" }
			},
			"patterns": [
				{
					"begin": ":",
					"end": "(?<=\")",
					"patterns": [
						{ "include": "#string" },
						{ "include": "#invalid" }
					]
				},
				{ "include": "#invalid" }
			]
		},
		"scopeName": {
			"comment": "\"scopeName\": \"...\"",
			"begin": "\"(scopeName)\"",
			"end": "(?!\\G)(?<=\")",
			"beginCaptures": { "1": { "name": "keyword.tmlanguage" } },
			"patterns": [
				{
					"begin": ":",
					"end": "(?<=\")",
					"patterns": [
						{
							"match": "\"(text|source)?(.*?(?<!\\\\)\\\\{2}*|.*?)\"",
							"captures": {
								"1": { "name": "support.function.tmlanguage" },
								"2": {
									"patterns": [
										{ "match": "(?<!\\.|\")\\.(?!$)",	"name": "keyword.operator.tmlanguage"	},
										{ "match": "[\\w\\d-]+",			"name": "string.tmlanguage"				},
										{ "match": "\\\\[\"\\\\bfnrt]",		"name": "invalid.tmlanguage"			},
										{ "include": "#escape-characters"	},
										{ "include": "#invalid"				}
									]
								}
							}
						},
						{ "include": "#invalid" }
					]
				},
				{ "include": "#invalid" }
			]
		},
		"name": {
			"comment": "\"name\": \"...\"",
			"begin": "\"(name)\"",
			"end": "(?!\\G)(?<=\")",
			"beginCaptures": { "1": { "name": "keyword.tmlanguage" } },
			"patterns": [
				{
					"begin": ":",
					"end": "(?<=\")",
					"patterns": [
						{ "include": "#string" },
						{ "include": "#invalid" }
					]
				},
				{ "include": "#invalid" }
			]
		},
		"uuid": {
			"comment": "\"uuid\": \"00000000-0000-0000-0000-000000000000\"",
			"begin": "\"(uuid)\"",
			"end": "(?!\\G)(?<=\")",
			"beginCaptures": { "1": { "name": "keyword.tmlanguage" } },
			"patterns": [
				{
					"begin": ":",
					"end": "(?<=\")",
					"patterns": [
						{
							"match": "\"(?i:([a-z\\d]{1,8})(?:-(?:([a-z\\d]{1,4})(?:-(?:([a-z\\d]{1,4})(?:-(?:([a-z\\d]{1,4})(?:-(?:([a-z\\d]{1,12})?)?)?)?)?)?)?)?)?)?(.*?)\"",
							"captures": {
								"1": { "name": "constant.numeric.tmlanguage" },
								"2": { "name": "constant.numeric.tmlanguage" },
								"3": { "name": "constant.numeric.tmlanguage" },
								"4": { "name": "constant.numeric.tmlanguage" },
								"5": { "name": "constant.numeric.tmlanguage" },
								"6": {
									"patterns": [
										{ "match": "\\\\[\"\\\\bfnrt]",	"name": "invalid.tmlanguage" },
										{ "include": "#escape-characters" },
										{ "include": "#invalid" }
									]
								}
							}
						},
						{ "include": "#invalid" }
					]
				},
				{ "include": "#invalid" }
			]
		},
		"fileTypes": {
			"comment": "\"fileTypes\": [ \"...\" ]",
			"begin": "\"(fileTypes)\"",
			"end": "(?<=])",
			"beginCaptures": { "1": { "name": "keyword.tmlanguage" } },
			"patterns": [
				{
					"begin": ":",
					"end": "(?<=])",
					"patterns": [
						{
							"begin": "\\[",
							"end": "]",
							"patterns": [
								{
									"begin": "(?<=\\[)",
									"end": "(?<=\")|(?=])",
									"patterns": [
										{ "include": "#string"	},
										{ "include": "#invalid"	}
									]
								},
								{
									"begin": ",",
									"end": "(?<=\")",
									"patterns": [
										{ "include": "#string"	},
										{ "include": "#invalid"	}
									]
								},
								{ "include": "#invalid" }
							]
						},
						{ "include": "#invalid" }
					]
				},
				{ "include": "#invalid" }
			]
		},
		"injectionSelector": {
			"comment": "\"injectionSelector\": \"...\"",
			"begin": "\"(injectionSelector)\"",
			"end": "(?!\\G)(?<=\")",
			"beginCaptures": { "1": { "name": "keyword.tmlanguage" } },
			"patterns": [
				{
					"begin": ":",
					"end": "(?<=\")",
					"patterns": [
						{
							"match": "\"([LR]:)?(.*?(?<!\\\\)\\\\{2}*|.*?)\"",
							"captures": {
								"1": { "name": "entity.name.function.tmlanguage" },
								"2": {
									"patterns": [
										{ "match": "(?<!\\.|\")\\.(?!$)",	"name": "keyword.operator.tmlanguage"	},
										{ "match": "[\\w\\d-]+",			"name": "string.tmlanguage"				},
										{ "match": "\\\\[\"\\\\bfnrt]",		"name": "invalid.tmlanguage"			},
										{ "include": "#escape-characters"	},
										{ "include": "#invalid"				}
									]
								}
							}
						},
						{ "include": "#invalid" }
					]
				},
				{ "include": "#invalid" }
			]
		},
		"firstLineMatch": {
			"comment": "\"firstLineMatch\": \"...\"",
			"begin": "\"(firstLineMatch)\"",
			"end": "(?!\\G)(?<=\")",
			"beginCaptures": { "1": { "name": "keyword.tmlanguage" } },
			"patterns": [
				{
					"begin": ":",
					"end": "(?<=\")",
					"patterns": [
						{
							"begin": "\"",
							"end": "\"",
							"patterns": [ { "include": "source.syntax.regex.tmLanguage" } ]
						},
						{ "include": "#invalid" }
					]
				},
				{ "include": "#invalid" }
			]
		},
		"foldingMarker": {
			"comment": "\"foldingStartMarker\": \"...\"",
			"begin": "\"(foldingSt(?:art|op)Marker)\"",
			"end": "(?!\\G)(?<=\")",
			"beginCaptures": { "1": { "name": "keyword.tmlanguage" } },
			"patterns": [
				{
					"begin": ":",
					"end": "(?<=\")",
					"patterns": [
						{
							"begin": "\"",
							"end": "\"",
							"patterns": [ { "include": "source.syntax.regex.tmLanguage" } ]
						},
						{ "include": "#invalid" }
					]
				},
				{ "include": "#invalid" }
			]
		},
		"patterns": {
			"comment": "\"patterns\": [ ... ]",
			"begin": "\"(patterns)\"",
			"end": "(?<=])",
			"beginCaptures": { "1": { "name": "keyword.tmlanguage" } },
			"patterns": [
				{
					"begin": ":",
					"end": "(?<=])",
					"patterns": [
						{
							"begin": "\\[",
							"end": "]",
							"patterns": [
								{
									"begin": "(?<=\\[)",
									"end": "(?<=})|(?=])",
									"patterns": [
										{ "include": "#pattern-item" },
										{ "include": "#invalid" }
									]
								},
								{
									"begin": ",",
									"end": "(?<=})",
									"patterns": [
										{ "include": "#pattern-item" },
										{ "include": "#invalid" }
									]
								},
								{ "include": "#invalid" }
							]
						},
						{ "include": "#invalid" }
					]
				},
				{ "include": "#invalid" }
			]
		},
		"pattern-item": {
			"comment": "{ ... }",
			"begin": "{",
			"end": "}",
			"patterns": [
				{
					"begin": "(?<={)",
					"end": "(?!\\G)(?<=[]}\"]|true|false|null|-?\\d+)|(?=})",
					"patterns": [
						{ "include": "#name-scope"			},
						{ "include": "#match"				},
						{ "include": "#include"				},
						{ "include": "#patterns"			},
						{ "include": "#captures"			},
						{ "include": "#repository"			},
						{ "include": "#applyEndPatternLast"	},
						{ "include": "#comment"				},
						{ "include": "#json-item"			},
						{ "include": "#invalid"				}
					]
				},
				{
					"begin": ",",
					"end": "(?!\\G)(?<=[]}\"]|true|false|null|-?\\d+)",
					"patterns": [
						{ "include": "#name-scope"			},
						{ "include": "#match"				},
						{ "include": "#include"				},
						{ "include": "#patterns"			},
						{ "include": "#captures"			},
						{ "include": "#repository"			},
						{ "include": "#applyEndPatternLast"	},
						{ "include": "#comment"				},
						{ "include": "#json-item"			},
						{ "include": "#invalid"				}
					]
				},
				{ "include": "#invalid" }
			]
		},
		"repository": {
			"comment": "\"repository\": { ... }",
			"begin": "\"(repository)\"",
			"end": "(?<=})",
			"beginCaptures": { "1": { "name": "keyword.tmlanguage" } },
			"patterns": [
				{
					"begin": ":",
					"end": "(?<=})",
					"patterns": [
						{
							"begin": "{",
							"end": "}",
							"patterns": [
								{
									"begin": "(?<={)",
									"end": "(?<=})|(?=})",
									"patterns": [
										{ "include": "#repository-item" },
										{ "include": "#invalid" }
									]
								},
								{
									"begin": ",",
									"end": "(?<=})",
									"patterns": [
										{ "include": "#repository-item" },
										{ "include": "#invalid" }
									]
								},
								{ "include": "#comment" },
								{ "include": "#invalid" }
							]
						},
						{ "include": "#invalid" }
					]
				},
				{ "include": "#invalid" }
			]
		},
		"repository-item": {
			"comment": "\"...\": { ... }",
			"begin": "\"(.*?(?<!\\\\)\\\\{2}*|.*?)\"",
			"end": "(?<=})",
			"beginCaptures": {
				"1": {
					"name": "variable.string.tmlanguage",
					"patterns": [ { "include": "#escape-characters" } ]
				}
			},
			"patterns": [
				{
					"begin": ":",
					"end": "(?<=})",
					"patterns": [
						{
							"begin": "{",
							"end": "}",
							"patterns": [
								{
									"begin": "(?<={)",
									"end": "(?<=[]}\"]|true|false|null|-?\\d+)|(?=})",
									"patterns": [
										{ "include": "#name-scope"			},
										{ "include": "#match"				},
										{ "include": "#captures"			},
										{ "include": "#patterns"			},
										{ "include": "#repository"			},
										{ "include": "#applyEndPatternLast"	},
										{ "include": "#comment"				},
										{ "include": "#json-item"			},
										{ "include": "#invalid"				}
									]
								},
								{
									"begin": ",",
									"end": "(?<=[]}\"]|true|false|null|-?\\d+)",
									"patterns": [
										{ "include": "#name-scope"			},
										{ "include": "#match"				},
										{ "include": "#captures"			},
										{ "include": "#patterns"			},
										{ "include": "#repository"			},
										{ "include": "#applyEndPatternLast"	},
										{ "include": "#comment"				},
										{ "include": "#json-item"			},
										{ "include": "#invalid"				}
									]
								},
								{ "include": "#invalid" }
							]
						},
						{ "include": "#invalid" }
					]
				},
				{ "include": "#invalid" }
			]
		},
		"name-scope": {
			"comment": "\"name\": \"...\"",
			"begin": "\"((?:contentN|n)ame)\"",
			"end": "(?!\\G)(?<=\")",
			"beginCaptures": { "1": { "name": "keyword.tmlanguage" } },
			"patterns": [
				{
					"begin": ":",
					"end": "(?<=\")",
					"patterns": [
						{
							"match": "\"(.*?(?<!\\\\)\\\\{2}*|.*?)\"",
							"captures": {
								"1": {
									"name": "$1..string",
									"patterns": [
										{ "include": "#escape-characters" } ,
										{ "match": "\\$\\d+", "name": "constant.character.escape.tmlanguage" }
									]
								}
							}
						},
						{ "include": "#invalid" }
					]
				},
				{ "include": "#invalid" }
			]
		},
		"match": {
			"comment": "\"match\": \"...\"",
			"begin": "\"(match|begin|while|end)\"",
			"end": "(?!\\G)(?<=\")",
			"beginCaptures": { "1": { "name": "keyword.tmlanguage" } },
			"patterns": [
				{
					"begin": ":",
					"end": "(?<=\")",
					"patterns": [
						{
							"begin": "\"",
							"end": "\"",
							"patterns": [ { "include": "source.syntax.regex.tmLanguage" } ]
						},
						{ "include": "#invalid" }
					]
				},
				{ "include": "#invalid" }
			]
		},
		"include": {
			"comment": "\"include\": \"#...\"",
			"begin": "\"(include)\"",
			"end": "(?!\\G)(?<=\")",
			"beginCaptures": { "1": { "name": "keyword.tmlanguage" } },
			"patterns": [
				{
					"begin": ":",
					"end": "(?<=\")",
					"patterns": [
						{
							"match": "\"(?:((\\$)(base|self)|(text|source)?([^#\"]*)(#)?(.*?))(?<=[^\\\\]\\\\{2}*)|\\g<1>)\"",
							"captures": {
								"2": { "name": "keyword.tmlanguage" },
								"3": { "name": "entity.name.function.tmlanguage" },
								"4": { "name": "entity.name.function.tmlanguage" },
								"5": {
									"patterns": [
										{ "match": "(?<![\\s.\"])\\.(?=[^\\s#\"])",	"name": "keyword.operator.tmlanguage"	},
										{ "match": "[\\w\\d-]+",					"name": "string.tmlanguage"				},
										{ "match": "\\\\[\"\\\\bfnrt]",				"name": "invalid.tmlanguage"			},
										{ "include": "#escape-characters"	},
										{ "include": "#invalid"				}
									]
								},
								"6": { "name": "keyword.tmlanguage" },
								"7": {
									"name": "variable.string.tmlanguage",
									"patterns": [ { "include": "#escape-characters" } ]
								}
							}
						},
						{ "include": "#invalid" }
					]
				},
				{ "include": "#invalid" }
			]
		},
		"captures": {
			"comment": "\"captures\": { ... }",
			"begin": "\"((?:beginC|whileC|endC|c)aptures)\"",
			"end": "(?<=})",
			"beginCaptures": { "1": { "name": "keyword.tmlanguage" } },
			"patterns": [
				{
					"begin": ":",
					"end": "(?<=})",
					"patterns": [
						{
							"begin": "{",
							"end": "}",
							"patterns": [
								{
									"begin": "(?<={)",
									"end": "(?!\\G)(?<=[}\"])|(?=})",
									"patterns": [
										{ "include": "#capture-item" },
										{ "include": "#include"		 },
										{ "include": "#invalid"		 }
									]
								},
								{
									"begin": ",",
									"end": "(?!\\G)(?<=[}\"])",
									"patterns": [
										{ "include": "#capture-item" },
										{ "include": "#include"		 },
										{ "include": "#invalid"		 }
									]
								},
								{ "include": "#invalid" }
							]
						},
						{ "include": "#invalid" }
					]
				},
				{ "include": "#invalid" }
			]
		},
		"capture-item": {
			"comment": "\"1\": { ... }",
			"begin": "\"(\\d+)\"",
			"end": "(?<=})",
			"beginCaptures": { "1": { "name": "constant.numeric.tmlanguage" } },
			"patterns": [
				{
					"begin": ":",
					"end": "(?<=})",
					"patterns": [
						{
							"begin": "{",
							"end": "}",
							"patterns": [
								{
									"begin": "(?<={)",
									"end": "(?!\\G)(?<=[]\"])|(?=})",
									"patterns": [
										{ "include": "#name-scope"	},
										{ "include": "#patterns"	},
										{ "include": "#json-item"	},
										{ "include": "#invalid"		}
									]
								},
								{
									"begin": ",",
									"end": "(?!\\G)(?<=[]\"])",
									"patterns": [
										{ "include": "#name-scope"	},
										{ "include": "#patterns"	},
										{ "include": "#json-item"	},
										{ "include": "#invalid"		}
									]
								},
								{ "include": "#invalid" }
							]
						},
						{ "include": "#invalid" }
					]
				},
				{ "include": "#invalid" }
			]
		},
		"applyEndPatternLast": {
			"comment": "\"applyEndPatternLast\": true",
			"begin": "\"(applyEndPatternLast)\"",
			"end": "(?!\\G)(?<=true|false|null|\\d+)",
			"beginCaptures": { "1": { "name": "keyword.tmlanguage" } },
			"patterns": [
				{
					"begin": ":",
					"end": "(?<=true|false|null|\\d+)",
					"patterns": [
						{
							"match": "true|false|null",
							"name": "keyword.control.tmlanguage"
						},
						{
							"match": "\\d+",
							"name": "constant.numeric.tmLanguage"
						},
						{ "include": "#invalid" }
					]
				},
				{ "include": "#invalid" }
			]
		},
		"comment": {
			"comment": "\"comment\": \"...\"",
			"begin": "\"(comment)\"",
			"end": "(?!\\G)(?<=\")",
			"beginCaptures": { "1": { "name": "keyword.tmlanguage" } },
			"patterns": [
				{
					"begin": ":",
					"end": "(?<=\")",
					"patterns": [
						{
							"match": "\"(.*?(?<!\\\\)\\\\{2}*|.*?)\"",
							"captures": {
								"1": {
									"name": "comment.tmlanguage",
									"patterns": [
										{
											"match": "(\\\\)/",
											"captures": { "1": { "name": "constant.character.escape.tmlanguage" } }
										},
										{ "include": "#escape-characters" }
									]
								}
							}
						},
						{ "include": "#invalid" }
					]
				},
				{ "include": "#invalid" }
			]
		},
		"string": {
			"match": "\"(.*?(?<!\\\\)\\\\{2}*|.*?)\"",
			"captures": {
				"1": {
					"name": "string.tmlanguage",
					"patterns": [ { "include": "#escape-characters" } ]
				}
			}
		},
		"escape-characters": {
			"patterns": [
				{
					"match": "(\\\\)/",
					"captures": { "1": { "name": "punctuation.definition.tag.tmlanguage" } }
				},
				{
					"match": "(\\\\)[\\\\\"]",
					"captures": { "1": { "name": "constant.character.escape.tmlanguage" } }
				},
				{
					"match": "\\\\[bfnrt]",
					"name": "constant.character.escape.tmlanguage"
				},
				{
					"match": "(\\\\u)(.{4})",
					"captures": {
						"1": { "name": "constant.character.escape.tmlanguage" },
						"2": {
							"name": "constant.numeric.tmlanguage",
							"patterns": [ { "match": "\\H+", "name": "invalid.tmlanguage markup.underline.tmlanguage" } ]
						}
					}
				},
				{
					"match": "\\\\.?|\"|(?! )\\s",
					"name": "invalid.tmlanguage markup.underline.tmlanguage"
				}
			]
		},
		"json-item": {
			"comment": "\"...\": ...",
			"begin": "\"(.*?(?<!\\\\)\\\\{2}*|.*?)\"",
			"end": "(?!\\G)(?<=[]}\"]|true|false|null|-?\\d+)",
			"beginCaptures": {
				"0": {
					"name": "variable.string.tmlanguage",
					"patterns": [
						{
							"match": "\\\\(\"|\\\\)",
							"name": "constant.character.escape.tmlanguage"
						},
						{
							"match": "\\\\.",
							"name": "invalid.tmlanguage markup.underline.tmlanguage"
						}
					]
				}
			},
			"patterns": [
				{
					"begin": ":",
					"end": "(?<=[]}\"]|true|false|null|-?\\d+)",
					"patterns": [
						{ "include": "#json-dictionary" },
						{ "include": "#json-array" },
						{ "include": "#json-value" },
						{ "include": "#invalid" }
					]
				},
				{ "include": "#invalid" }
			]
		},
		"json-dictionary": {
			"comment": "{ ... }",
			"begin": "{",
			"end": "}",
			"patterns": [
				{
					"begin": "(?<={)",
					"end": "(?<=[]}\"]|true|false|null|-?\\d+)|(?=})",
					"patterns": [
						{ "include": "#json-item"	},
						{ "include": "#invalid"		}
					]
				},
				{
					"begin": ",",
					"end": "(?<=[]}\"]|true|false|null|-?\\d+)",
					"patterns": [
						{ "include": "#json-item"	},
						{ "include": "#invalid"		}
					]
				},
				{ "include": "#invalid" }
			]
		},
		"json-array": {
			"comment": "[ ... ]",
			"begin": "\\[",
			"end": "]",
			"patterns": [
				{
					"begin": "(?<=\\[)",
					"end": "(?<=[]}\"]|true|false|null|-?\\d+)|(?=])",
					"patterns": [
						{ "include": "#json-dictionary"	},
						{ "include": "#json-array"		},
						{ "include": "#json-value"		},
						{ "include": "#invalid"			}
					]
				},
				{
					"begin": ",",
					"end": "(?<=[]}\"]|true|false|null|-?\\d+)",
					"patterns": [
						{ "include": "#json-dictionary"	},
						{ "include": "#json-array"		},
						{ "include": "#json-value"		},
						{ "include": "#invalid"			}
					]
				},
				{ "include": "#invalid" }
			]
		},
		"json-value": {
			"patterns": [
				{
					"comment": "\"...\"",
					"match": "\"(?:.*?(?<!\\\\)\\\\{2}*|.*?)\"",
					"captures": {
						"0": {
							"name": "string.tmlanguage",
							"patterns": [
								{
									"match": "\\\\[\"\\\\/bfnrt]",
									"name": "constant.character.escape.tmlanguage"
								},
								{
									"match": "\\\\u\\h{4}",
									"name": "constant.character.escape.tmlanguage"
								},
								{
									"match": "\\\\.",
									"name": "invalid.tmlanguage"
								}
							]
						}
					}
				},
				{
					"match": "true|false|null",
					"name": "keyword.control.tmlanguage"
				},
				{
					"match": "-?\\d+",
					"name": "constant.numeric.tmlanguage"
				}
			]
		},
		"invalid": {
			"patterns": [
				{
					"match": "//.*",
					"name": "invalid.string.tmlanguage markup.underline.tmlanguage"
				},
				{
					"match": "\\S",
					"name": "invalid.string.tmlanguage"
				}
			]
		}
	}
}